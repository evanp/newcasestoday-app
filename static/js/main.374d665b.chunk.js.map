{"version":3,"sources":["NewCasesToday.js","App.js","reportWebVitals.js","reducer.js","index.js"],"names":["NewCasesToday","props","className","data-testid","newCases","delta","Math","abs","App","useSelector","state","lastDate","dispatch","useDispatch","useEffect","fetch","then","res","text","data","split","map","line","filter","row","length","latest","parseInt","type","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","Date","toISOString","slice","store","createStore","currentState","action","applyMiddleware","thunk","render","document","getElementById"],"mappings":"uNAEe,SAASA,EAAcC,GAEpC,OAAO,gCACH,uBAAMC,UAAU,gBAAgBC,cAAY,kBAA5C,cAAgEF,EAAMG,YADnE,IAEF,uBAAMF,UAAU,QAAQC,cAAY,QAApC,UAA8CF,EAAMI,OAAS,EAAK,IAAM,IAAKC,KAAKC,IAAIN,EAAMI,UAF1F,O,WCiDMG,MA9Cf,SAAaP,GAEX,IACMG,EAAWK,aAAY,SAAAC,GAAK,OAAIA,EAAMN,YACtCO,EAAWF,aAAY,SAAAC,GAAK,OAAIA,EAAMC,YACtCN,EAAQI,aAAY,SAAAC,GAAK,OAAIA,EAAML,SACnCO,EAAWC,cA8BjB,OAJAC,qBAAU,WACRF,GAxBO,SAAAA,GACHG,MAZa,qDAaZC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GACJ,IAEMC,EAFQD,EAAKE,MAAM,MACNC,KAAI,SAAAC,GAAI,OAAIA,EAAKF,MAAM,QACxBG,QAAO,SAAAC,GAAG,OAAIA,EAAI,GAAGC,OAAS,KAC1CC,EAASP,EAAKA,EAAKM,OAAS,GAC5BpB,EAAQsB,SAASD,EAAO,GAAI,IAAMC,SAASR,EAAKA,EAAKM,OAAS,GAAG,GAAI,IACvEC,GACAd,EAAS,CACLgB,KAAM,kBACNT,KAAM,CACFR,SAAUe,EAAO,GACjBtB,SAAUuB,SAASD,EAAO,GAAI,IAC9BrB,MAAOA,cAazB,qBAAKH,UAAU,MAAf,SACE,yBAAQA,UAAU,aAAlB,UACE,sBAAKA,UAAU,YAAf,mCArCW,WAqCX,UAAkE,sBAAMC,cAAY,YAAlB,SAA+BQ,OACjG,cAAC,EAAD,CAAeP,SAAUA,EAAUC,MAAOA,UCnCnCwB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBf,MAAK,YAAkD,IAA/CgB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,qBCPVO,EAAe,CACf1B,UAAW,IAAI2B,MAAQC,cAAcC,MAAM,EAAG,IAC9CpC,SAAU,EACVC,MAAO,GCOX,IAAMoC,EAAQC,aDJC,WAAuD,IAAtCC,EAAqC,uDAAtBN,EAAcO,EAAQ,uCAEjE,OAAQA,EAAOhB,MACX,IAAK,kBACD,MAAO,CAAEjB,SAAUiC,EAAOzB,KAAKR,SAAUP,SAAUwC,EAAOzB,KAAKf,SAAUC,MAAOuC,EAAOzB,KAAKd,OAChG,QACI,OAAOsC,KCFgBE,YAAgBC,MAEnDC,iBACE,cAAC,IAAD,CAAUN,MAAOA,EAAjB,SACE,cAAC,EAAD,MAEFO,SAASC,eAAe,SAM1BpB,K","file":"static/js/main.374d665b.chunk.js","sourcesContent":["import './NewCasesToday.css';\n\nexport default function NewCasesToday(props) {\n  \n  return <div>\n      <span className='NewCasesToday' data-testid='new-cases-today'>+{props.newCases}</span>\n      (<span className='delta' data-testid='delta'>{(props.delta >= 0) ? '+' : '-'}{Math.abs(props.delta)}</span>)\n      </div>\n}\n\n","import React, {useEffect} from 'react';\nimport './App.css';\nimport NewCasesToday from './NewCasesToday';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst MONTREAL_URL = \"https://data.newcasestoday.app/city/CA/CA_MTR.csv\"\n\nfunction App(props) {\n\n  const location = \"Montreal\";\n  const newCases = useSelector(state => state.newCases)\n  const lastDate = useSelector(state => state.lastDate)\n  const delta = useSelector(state => state.delta)\n  const dispatch = useDispatch();\n\n  function getNewCasesToday() {\n    return dispatch => {\n        fetch(MONTREAL_URL)\n        .then(res => res.text())\n        .then(text => {\n          const lines = text.split('\\n')\n          const rows = lines.map(line => line.split(';'))\n          const data = rows.filter(row => row[0].length > 0)\n          const latest = data[data.length - 1]\n          const delta = parseInt(latest[1], 10) - parseInt(data[data.length - 2][1], 10)\n          if (latest) {\n              dispatch({\n                  type: \"FETCH_NEW_CASES\",\n                  data: {\n                      lastDate: latest[0],\n                      newCases: parseInt(latest[1], 10),\n                      delta: delta\n                  }\n              });\n          }\n      });\n    };\n  }\n\n  useEffect(() => {\n    dispatch(getNewCasesToday());\n  });\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div className=\"App-title\">New COVID-19 cases in {location} as of <span data-testid=\"last-date\">{lastDate}</span></div>\n        <NewCasesToday newCases={newCases} delta={delta} />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","let initialState = {\n    lastDate: (new Date()).toISOString().slice(0, 10),\n    newCases: 0,\n    delta: 0\n}\n\nexport default function reducer(currentState = initialState, action) {\n\n    switch (action.type) {\n        case \"FETCH_NEW_CASES\":\n            return { lastDate: action.data.lastDate, newCases: action.data.newCases, delta: action.data.delta }\n        default:\n            return currentState\n    }\n}","import './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from './reducer';\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}